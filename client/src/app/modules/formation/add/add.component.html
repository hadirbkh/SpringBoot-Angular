<div class="form-container">
  <div class="form">
    <mat-dialog-content>
      <h2 mat-dialog-title>Ajouter une Formation</h2>

      <form #formationForm="ngForm" (ngSubmit)="submit()" class="form">
        <mat-form-field style="width: 100%">
          <mat-label>Titre</mat-label>
          <input matInput [(ngModel)]="formation.titre" name="titre" required #titre="ngModel" />
          <mat-error *ngIf="titre.invalid && titre.touched">Le titre est requis</mat-error>
        </mat-form-field>

        <mat-form-field style="width: 100%">
          <mat-label>Annee</mat-label>
          <input matInput type="number" [(ngModel)]="formation.annee" name="annee" required pattern="^[0-9]{4}$" #annee="ngModel" />
          <mat-error *ngIf="annee.invalid && annee.touched">Entrez une année valide (ex : 2025)</mat-error>
        </mat-form-field>

        <mat-form-field style="width: 100%">
          <mat-label>Budget</mat-label>
          <input matInput type="number" [(ngModel)]="formation.budget" name="budget" required min="0" #budget="ngModel" />
          <mat-error *ngIf="budget.invalid && budget.touched">Entrez un budget valide (supérieur à 0)</mat-error>
        </mat-form-field>

        <mat-form-field style="width: 100%">
          <mat-label>Duree</mat-label>
          <input matInput type="number" [(ngModel)]="formation.duree" name="duree" required min="1" #duree="ngModel"/>
          <mat-error *ngIf="duree.invalid && duree.touched">Entrez une durée valide (supérieure à 0)</mat-error>
        </mat-form-field>

        <mat-form-field style="width: 100%">
          <mat-label>Capacité Maximale</mat-label>
          <input matInput type="number" [(ngModel)]="formation.capaciteMax" name="capaciteMax" required min="1" #capaciteMax="ngModel"/>
          <mat-error *ngIf="capaciteMax.invalid && capaciteMax.touched">Entrez une capacité maximale valide (supérieure à 0)</mat-error>
        </mat-form-field>

        <mat-form-field style="width: 100%">
          <mat-label>Domaine</mat-label>
          <mat-select [(ngModel)]="formation.domaine" name="domaine" required #domaine="ngModel">
            <mat-option *ngFor="let domaine of domainesList" [value]="domaine">{{domaine.libelle}}</mat-option>
          </mat-select>
          <mat-error *ngIf="domaine.invalid && domaine.touched">Sélectionnez un domaine</mat-error>
        </mat-form-field>

        <mat-dialog-actions class="header-with-button">
          <button type="button" mat-button mat-dialog-close>Annuler</button>
          <button type="submit" mat-button cdkFocusInitial [disabled]="formationForm.invalid">
            Ajouter
          </button>
        </mat-dialog-actions>
      </form>
    </mat-dialog-content>
  </div>
</div>
